{"ast":null,"code":"import \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/web.dom-collections.for-each.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.search.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.filter.js\";\nimport Layout from \"../../layouts/main.vue\";\nimport PageHeader from \"@/components/page-header\";\nimport appConfig from \"../../../app.config\";\nimport Select2 from 'vue3-select2-component';\nimport RolesDataServise from \"/src/services/RolesDataServise\";\nexport default {\n  jsonpage: {\n    title: \"Basic Elements\",\n    meta: [{\n      name: \"description\",\n      content: appConfig.description\n    }]\n  },\n  data: function data() {\n    return {\n      fields: [{\n        first: '',\n        last: ''\n      }],\n      title: \"Добавление новой роли\",\n      PageRequest: {\n        Fields: [{\n          Name: '',\n          Value: '',\n          Operation: '',\n          Order: ''\n        }],\n        PageNumber: 0,\n        PageLenght: 0,\n        TotalRecords: 0,\n        TotalPage: 0\n      },\n      page: 1,\n      perPage: 1000,\n      pages: [],\n      jsonPages: {\n        PageNumber: 0,\n        TotalRecords: 0\n      },\n      jsonFields: [{\n        name: '',\n        value: ''\n      }],\n      search: \"\",\n      Permissions: [],\n      selected: [],\n      allSelected: false,\n      Role: {\n        id: 0,\n        name: ''\n      }\n    };\n  },\n  components: {\n    Layout: Layout,\n    PageHeader: PageHeader,\n    Select2: Select2\n  },\n  methods: {\n    selectAll: function selectAll() {\n      var all_s = this.allSelected;\n      this.Permissions.forEach(function (itm) {\n        return itm.selected = !all_s;\n      });\n    },\n    AddRole: function AddRole() {\n      var _this = this;\n\n      var data = {\n        'name': this.Role.name\n      };\n      RolesDataServise.create(data).then(function (response) {\n        console.log(response);\n        _this.Role.id = response.data.id;\n        _this.submitted = true;\n\n        if (response.status == 200) {\n          _this.AddPerms(response.data.id);\n        } else {\n          return response.data.message;\n        }\n      }); //.catch(e => {\n      // console.log(e);\n      //});\n    },\n    newRole: function newRole() {\n      this.submitted = false;\n      this.Role = {};\n    },\n    retrieveRoles: function retrieveRoles() {\n      var _this2 = this;\n\n      this.jsonPages = {\n        pg_number: this.page,\n        pg_length: this.perPage\n      };\n\n      if (this.search != \"\") {\n        this.jsonPages = [{\n          field: \"name\",\n          value: this.search\n        }];\n      } else {\n        this.jsonFields = [];\n      }\n\n      ;\n      RolesDataServise.listPerms(this.jsonPages).then(function (response) {\n        //dispatch('notification/success', 'Получение списка прошло успешно', { root: true });\n        _this2.Permissions = response.data.List;\n        console.log(response.data.List);\n        _this2.perPage = response.data.pg_length;\n        _this2.page = response.data.pg_number;\n        var i = 0;\n\n        for (i = 0; i < response.data.total_pg; i++) {\n          _this2.pages[i] = i + 1;\n        }\n      }).catch(function (error) {\n        //dispatch('notification/error', error, { root: true });\n        console.log(error);\n      });\n    },\n    AddPerms: function AddPerms(role_id) {\n      var _this3 = this;\n\n      console.log(this.selected);\n      var data = {\n        'role_id': role_id,\n        'perm_id': this.selected\n      };\n      RolesDataServise.addendpoints(data).then(function (response) {\n        console.log(response);\n        _this3.Permission.id = response.data.id;\n        _this3.submitted = true;\n\n        if (response.status == 200) {} else {\n          return response.data.message;\n        }\n      }).catch(function (e) {\n        console.log(e);\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.retrieveRoles();\n  },\n  computed: {\n    allSelected: function allSelected() {\n      return this.Permissions.every(function (itm) {\n        return itm.selected;\n      });\n    }\n  },\n  watch: {\n    Permissions: {\n      handler: function handler() {\n        this.selected = this.Permissions.filter(function (itm) {\n          return itm.selected;\n        }).map(function (itm) {\n          return itm.id;\n        });\n      },\n      deep: true\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;AAMI,OAAOA,MAAP,MAAmB,wBAAnB;AACA,OAAOC,UAAP,MAAuB,0BAAvB;AACA,OAAOC,SAAP,MAAsB,qBAAtB;AACA,OAAOC,OAAP,MAAoB,wBAApB;AAEA,OAAOC,gBAAP,MAA6B,gCAA7B;AAGA,eAAe;AACbC,UAAQ,EAAE;AACRC,SAAK,EAAE,gBADC;AAERC,QAAI,EAAE,CAAC;AAAEC,UAAI,EAAE,aAAR;AAAuBC,aAAO,EAAEP,SAAS,CAACQ;AAA1C,KAAD;AAFE,GADG;AAKbC,MALa,kBAKN;AAEL,WAAO;AACLC,YAAM,EAAE,CAAC;AAAEC,aAAK,EAAE,EAAT;AAAYC,YAAI,EAAE;AAAlB,OAAD,CADH;AAELR,WAAK,EAAE,uBAFF;AAILS,iBAAW,EAAE;AACCC,cAAM,EAAE,CAAC;AACTC,cAAG,EAAG,EADG;AAETC,eAAK,EAAC,EAFG;AAGTC,mBAAS,EAAC,EAHD;AAITC,eAAK,EAAC;AAJG,SAAD,CADT;AAOCC,kBAAU,EAAC,CAPZ;AAQCC,kBAAU,EAAC,CARZ;AASCC,oBAAY,EAAC,CATd;AAUCC,iBAAS,EAAC;AAVX,OAJR;AAgBCC,UAAI,EAAE,CAhBP;AAiBCC,aAAO,EAAE,IAjBV;AAkBCC,WAAK,EAAE,EAlBR;AAmBCC,eAAS,EAAE;AACCP,kBAAU,EAAE,CADb;AAECE,oBAAY,EAAC;AAFd,OAnBZ;AAuBCM,gBAAU,EAAE,CAAC;AACDrB,YAAI,EAAC,EADJ;AAEDsB,aAAK,EAAE;AAFN,OAAD,CAvBb;AA4BCC,YAAM,EAAC,EA5BR;AA8BCC,iBAAW,EAAC,EA9Bb;AAgCCC,cAAQ,EAAE,EAhCX;AAkCCC,iBAAW,EAAE,KAlCd;AAuCLC,UAAI,EAAC;AAEHC,UAAE,EAAC,CAFA;AAGH5B,YAAI,EAAC;AAHF;AAvCA,KAAP;AAiDD,GAxDY;AAyDb6B,YAAU,EAAE;AACVrC,UAAM,EAANA,MADU;AAEVC,cAAU,EAAVA,UAFU;AAGVE,WAAM,EAANA;AAHU,GAzDC;AA8DXmC,SAAO,EAAE;AACLC,aADK,uBACO;AACZ,UAAIC,KAAI,GAAI,KAAKN,WAAjB;AACA,WAAKF,WAAL,CAAiBS,OAAjB,CAA0B,aAAE;AAAA,eAAKC,GAAG,CAACT,QAAJ,GAAe,CAACO,KAArB;AAAA,OAA5B;AACC,KAJI;AAMTG,WANS,qBAMC;AAAA;;AAGR,UAAIhC,IAAG,GAAI;AAEP,gBAAO,KAAKwB,IAAL,CAAU3B;AAFV,OAAX;AASAJ,sBAAgB,CAACwC,MAAjB,CAAwBjC,IAAxB,EACGkC,IADH,CACQ,kBAAO,EAAK;AAEdC,eAAO,CAACC,GAAR,CAAYC,QAAZ;AAGF,aAAI,CAACb,IAAL,CAAUC,EAAV,GAAeY,QAAQ,CAACrC,IAAT,CAAcyB,EAA7B;AAEA,aAAI,CAACa,SAAL,GAAiB,IAAjB;;AACA,YAAID,QAAQ,CAACE,MAAT,IAAmB,GAAvB,EAA2B;AACnB,eAAI,CAACC,QAAL,CAAcH,QAAQ,CAACrC,IAAT,CAAcyB,EAA5B;AAClB,SAFU,MAKF;AACJ,iBAAOY,QAAQ,CAACrC,IAAT,CAAcyC,OAArB;AAA4B;AACvB,OAhBH,EAZQ,CA6BN;AACC;AACD;AAEH,KAvCQ;AA6CTC,WA7CS,qBA6CC;AACR,WAAKJ,SAAL,GAAiB,KAAjB;AACA,WAAKd,IAAL,GAAY,EAAZ;AACD,KAhDQ;AAmDTmB,iBAnDS,2BAmDO;AAAA;;AAEjB,WAAK1B,SAAL,GAAiB;AACf2B,iBAAS,EAAC,KAAK9B,IADA;AAEf+B,iBAAS,EAAE,KAAK9B;AAFD,OAAjB;;AAKF,UAAI,KAAKK,MAAL,IAAa,EAAjB,EAAoB;AACnB,aAAKH,SAAL,GAAiB,CAAC;AACf6B,eAAK,EAAC,MADS;AAEf3B,eAAK,EAAE,KAAKC;AAFG,SAAD,CAAjB;AAIC,OALF,MAKM;AACD,aAAKF,UAAL,GAAkB,EAAlB;AACH;;AAAA;AAIDzB,sBAAgB,CAACsD,SAAjB,CAA4B,KAAK9B,SAAjC,EACMiB,IADN,CACW,kBAAO,EAAK;AAEZ;AACA,cAAI,CAACb,WAAL,GAAmBgB,QAAQ,CAACrC,IAAT,CAAcgD,IAAjC;AAEAb,eAAO,CAACC,GAAR,CAAYC,QAAQ,CAACrC,IAAT,CAAcgD,IAA1B;AAEA,cAAI,CAACjC,OAAL,GAAesB,QAAQ,CAACrC,IAAT,CAAc6C,SAA7B;AAEA,cAAI,CAAC/B,IAAL,GAAYuB,QAAQ,CAACrC,IAAT,CAAc4C,SAA1B;AAEA,YAAIK,CAAC,GAAC,CAAN;;AACA,aAAIA,CAAC,GAAC,CAAN,EAASA,CAAC,GAACZ,QAAQ,CAACrC,IAAT,CAAckD,QAAzB,EAAkCD,CAAC,EAAnC,EAAsC;AACtC,gBAAI,CAACjC,KAAL,CAAWiC,CAAX,IAAcA,CAAC,GAAC,CAAhB;AAAkB;AACjB,OAfZ,EAgBYE,KAhBZ,CAgBkB,eAAI,EAAK;AAChB;AACAhB,eAAO,CAACC,GAAR,CAAYgB,KAAZ;AACC,OAnBZ;AAsBM,KA3FK;AA4FHZ,YA5FG,oBA4FMa,OA5FN,EA4Fe;AAAA;;AAE5BlB,aAAO,CAACC,GAAR,CAAY,KAAKd,QAAjB;AACA,UAAItB,IAAG,GAAI;AACP,mBAAUqD,OADH;AAEP,mBAAU,KAAK/B;AAFR,OAAX;AAMA7B,sBAAgB,CAAC6D,YAAjB,CAA8BtD,IAA9B,EACGkC,IADH,CACQ,kBAAO,EAAK;AAEdC,eAAO,CAACC,GAAR,CAAYC,QAAZ;AAGF,cAAI,CAACkB,UAAL,CAAgB9B,EAAhB,GAAqBY,QAAQ,CAACrC,IAAT,CAAcyB,EAAnC;AAEA,cAAI,CAACa,SAAL,GAAiB,IAAjB;;AACA,YAAID,QAAQ,CAACE,MAAT,IAAmB,GAAvB,EAA2B,CAE/B,CAFI,MAKA;AACJ,iBAAOF,QAAQ,CAACrC,IAAT,CAAcyC,OAArB;AAA4B;AACzB,OAhBH,EAiBGU,KAjBH,CAiBS,aAAK;AACZhB,eAAO,CAACC,GAAR,CAAYoB,CAAZ;AACC,OAnBH;AAqBC;AA1HY,GA9DE;AA4LZC,SA5LY,qBA4LF;AACV,SAAKd,aAAL;AAIA,GAjMY;AAkMbe,UAAQ,EAAE;AACJnC,eADI,yBACU;AACd,aAAO,KAAKF,WAAL,CAAiBsC,KAAjB,CAAuB,aAAE;AAAA,eAAK5B,GAAG,CAACT,QAAT;AAAA,OAAzB,CAAP;AACA;AAHI,GAlMG;AAuMbsC,OAAK,EAAE;AACTvC,eAAW,EAAE;AACXwC,aADW,qBACD;AACR,aAAKvC,QAAL,GAAgB,KAAKD,WAAL,CACbyC,MADa,CACL,aAAE;AAAA,iBAAK/B,GAAG,CAACT,QAAT;AAAA,SADG,EAEbyC,GAFa,CAER,aAAE;AAAA,iBAAKhC,GAAG,CAACN,EAAT;AAAA,SAFM,CAAhB;AAGD,OALU;AAMXuC,UAAI,EAAE;AANK;AADJ;AAvMM,CAAf","names":["Layout","PageHeader","appConfig","Select2","RolesDataServise","jsonpage","title","meta","name","content","description","data","fields","first","last","PageRequest","Fields","Name","Value","Operation","Order","PageNumber","PageLenght","TotalRecords","TotalPage","page","perPage","pages","jsonPages","jsonFields","value","search","Permissions","selected","allSelected","Role","id","components","methods","selectAll","all_s","forEach","itm","AddRole","create","then","console","log","response","submitted","status","AddPerms","message","newRole","retrieveRoles","pg_number","pg_length","field","listPerms","List","i","total_pg","catch","error","role_id","addendpoints","Permission","e","mounted","computed","every","watch","handler","filter","map","deep"],"sourceRoot":"","sources":["C:\\Users\\Max\\Desktop\\project1.0.0-main\\src\\views\\roles\\add.vue"],"sourcesContent":["<style>\r\n    .select2 {\r\n        width: 150px !important;\r\n    }\r\n    </style>\r\n    <script>\r\n    import Layout from \"../../layouts/main.vue\";\r\n    import PageHeader from \"@/components/page-header\";\r\n    import appConfig from \"../../../app.config\";\r\n    import Select2 from 'vue3-select2-component';\r\n\r\n    import RolesDataServise from \"/src/services/RolesDataServise\";\r\n\r\n    \r\n    export default {\r\n      jsonpage: {\r\n        title: \"Basic Elements\",\r\n        meta: [{ name: \"description\", content: appConfig.description }],\r\n      },\r\n      data() {\r\n        \r\n        return {\r\n          fields: [{ first: '',last: '' }],\r\n          title: \"Добавление новой роли\",\r\n          \r\n          PageRequest: {\r\n                        Fields: [{\r\n                        Name :'',\r\n                        Value:'',\r\n                        Operation:'',\r\n                        Order:'',\r\n                        }],\r\n                        PageNumber:0,\r\n                        PageLenght:0,\r\n                        TotalRecords:0,\r\n                        TotalPage:0,\r\n                    },\r\n                page: 1,\r\n                perPage: 1000,\r\n                pages: [],\r\n                jsonPages: {\r\n                            PageNumber: 0,\r\n                            TotalRecords:0,\r\n                },\r\n                jsonFields: [{\r\n                            name:'',\r\n                            value: ''\r\n                }],\r\n\r\n                search:\"\",\r\n\r\n                Permissions:[],\r\n\r\n                selected: [],\r\n\r\n                allSelected: false,\r\n                \r\n         \r\n          \r\n          \r\n          Role:{\r\n          \r\n            id:0,\r\n            name:'',\r\n\r\n          },  \r\n          \r\n\r\n        };\r\n        \r\n      },\r\n      components: {\r\n        Layout,\r\n        PageHeader,\r\n        Select2\r\n      },\r\n        methods: {\r\n            selectAll() {\r\n            let all_s = this.allSelected;\r\n            this.Permissions.forEach( itm => itm.selected = !all_s );\r\n            },\r\n    \r\n        AddRole() {\r\n\r\n\r\n          var data = {\r\n            \r\n              'name':this.Role.name,\r\n           \r\n\r\n    \r\n          };\r\n          \r\n    \r\n          RolesDataServise.create(data)\r\n            .then(response => {\r\n                \r\n                console.log(response)\r\n                \r\n              \r\n              this.Role.id = response.data.id;\r\n              \r\n              this.submitted = true;\r\n              if (response.status == 200){\r\n                      this.AddPerms(response.data.id)\r\n    }\r\n        \r\n        \r\n        else{\r\n        return response.data.message}\r\n            })\r\n            //.catch(e => {\r\n             // console.log(e);\r\n            //});\r\n           \r\n        },\r\n\r\n\r\n\r\n        \r\n        \r\n        newRole() {\r\n          this.submitted = false;\r\n          this.Role = {};\r\n        },\r\n    \r\n    \r\n        retrieveRoles() {\r\n       \r\n       this.jsonPages = {\r\n         pg_number:this.page,\r\n         pg_length: this.perPage\r\n     };\r\n\r\n     if (this.search!=\"\"){\r\n      this.jsonPages = [{\r\n         field:\"name\",\r\n         value: this.search\r\n      }];\r\n      }else{\r\n          this.jsonFields = [];\r\n      };\r\n      \r\n\r\n           \r\n      RolesDataServise.listPerms( this.jsonPages)\r\n           .then(response => {\r\n\r\n                 //dispatch('notification/success', 'Получение списка прошло успешно', { root: true });\r\n                 this.Permissions = response.data.List;\r\n\r\n                 console.log(response.data.List)\r\n\r\n                 this.perPage = response.data.pg_length;\r\n\r\n                 this.page = response.data.pg_number;\r\n                 \r\n                 let i=0;\r\n                 for(i=0; i<response.data.total_pg;i++){\r\n                 this.pages[i]=i+1;}\r\n                 })\r\n                 .catch(error => {\r\n                 //dispatch('notification/error', error, { root: true });\r\n                 console.log(error);\r\n                 });\r\n\r\n\r\n           },\r\n              AddPerms(role_id) {\r\n\r\n    console.log(this.selected)\r\n    var data = {\r\n        'role_id':role_id,\r\n        'perm_id':this.selected,\r\n        \r\n    };\r\n\r\n    RolesDataServise.addendpoints(data)\r\n      .then(response => {\r\n          \r\n          console.log(response)\r\n          \r\n        \r\n        this.Permission.id = response.data.id;\r\n        \r\n        this.submitted = true;\r\n        if (response.status == 200){\r\n                \r\n    }\r\n\r\n\r\n    else{\r\n    return response.data.message}\r\n      })\r\n      .catch(e => {\r\n      console.log(e);\r\n      });\r\n\r\n    },\r\n        \r\n      },\r\n    \r\n       mounted() {\r\n       this.retrieveRoles();\r\n\r\n      \r\n    \r\n      },\r\n      computed: {\r\n            allSelected() {\r\n            return this.Permissions.every(itm => itm.selected);\r\n            }\r\n      },\r\n      watch: {\r\n    Permissions: {\r\n      handler() {\r\n        this.selected = this.Permissions\r\n          .filter( itm => itm.selected )\r\n          .map( itm => itm.id );\r\n      },\r\n      deep: true\r\n    }\r\n  }\r\n    };\r\n    </script>\r\n    \r\n    <template>\r\n        <Layout>\r\n          <PageHeader/>\r\n          \r\n            <div class=\"live-preview\">\r\n                                 \r\n                              <form class=\"row g-3 needs-validation\" novalidate>\r\n                                      \r\n                                  \r\n                                  <div class=\"col-md-6 position-relative\">\r\n                                      <label for=\"validationTooltip03\" class=\"form-label\">role</label>\r\n                                      <input type=\"text\" class=\"form-control\" id=\"validationTooltip03\" v-model=\"Role.name\" >                                       \r\n                                  </div>\r\n  \r\n                                 \r\n                                    \r\n      <p>\r\n       \r\n          </p>\r\n    \r\n      \r\n       <div>\r\n      \r\n         <table class=\"table table-primary table-striped align-middle table-nowrap mb-0\">\r\n          <thead>\r\n              <tr>\r\n                    <!-- items -->\r\n                    \r\n                  \r\n               \r\n                  <th>Endpoint path</th>\r\n                  <th>Endpoint method</th>\r\n                  <th>all</th>\r\n                  <th>\r\n                    <div class=\"form-check\">\r\n                          <input class=\"form-check-input\" type=\"checkbox\" id=\"formCheck2\" :checked=\"allSelected\" @click=\"selectAll\" />                                                            \r\n                          <label class=\"form-check-label\" for=\"formCheck2\"></label>\r\n                    </div>\r\n                  </th>\r\n                \r\n                  \r\n                  \r\n                  \r\n              \r\n              </tr>\r\n          </thead>\r\n          <tbody>\r\n              <tr v-for=\"(Permission) in Permissions\" :key=\"Permission.id\">\r\n          \r\n                 \r\n                  \r\n                 \r\n                  <td >{{Permission.path}}</td>\r\n  \r\n                  <td >{{Permission.method}}</td>\r\n                  \r\n                 <td></td>\r\n                 \r\n                    <!-- delete Button -->\r\n                  <td>\r\n                    <div class=\"form-check\">\r\n                          <input class=\"form-check-input\" type=\"checkbox\" id=\"formCheck2\" unchecked  :value=\"Permission.id\" number v-model=\"Permission.selected\"/>                                                            \r\n                          <label class=\"form-check-label\" for=\"formCheck2\"></label>\r\n                    </div>\r\n                      \r\n                  </td>\r\n              \r\n              </tr>\r\n             \r\n          </tbody>\r\n          <p></p>\r\n          \r\n      </table>\r\n      \r\n       </div>\r\n      \r\n          <p>\r\n       \r\n          </p>\r\n        \r\n          <div class=\"col-12\">\r\n                        <button class=\"btn btn-success\" type=\"button\" @click=\"AddRole\">add</button>\r\n                       \r\n          </div>\r\n               <p>\r\n       \r\n          </p>\r\n        \r\n                          \r\n                                 \r\n                                 \r\n                                 \r\n                                 \r\n                                 \r\n                                  </form>\r\n                              </div>\r\n      \r\n      \r\n      \r\n      \r\n      \r\n          </Layout>\r\n      </template>\r\n    "]},"metadata":{},"sourceType":"module"}