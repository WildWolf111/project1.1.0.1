{"ast":null,"code":"import { userService } from '../../helpers/authservice/user.service';\nimport router from '../../router/index';\nvar user = JSON.parse(localStorage.getItem('user'));\nexport var state = user ? {\n  status: {\n    loggeduser: true\n  },\n  user: user\n} : {\n  status: {},\n  user: null\n};\nexport var actions = {\n  // Logs in the user.\n  // eslint-disable-next-line no-unused-vars\n  loginF: function loginF(_ref, _ref2) {\n    var dispatch = _ref.dispatch,\n        commit = _ref.commit;\n    var login = _ref2.login,\n        password = _ref2.password;\n    commit('loginRequest', {\n      login: login\n    });\n    userService.login(login, password).then(function (user) {\n      commit('loginSuccess', user);\n      router.push('/');\n    }).catch(function (err) {\n      if (err.response) {\n        var message = '';\n\n        switch (err.response.data.status_code) {\n          case 400:\n            message = 'login or password is invalid';\n            break;\n\n          case 400:\n            message = 'login or password is invalid';\n            break;\n\n          default:\n            message = 'We are so sorry, but authentification server is unreacheable';\n            break;\n        }\n\n        commit('loginFailure', err);\n        dispatch('notification/error', message, {\n          root: true\n        }); // client received an error response (5xx, 4xx)\n      } else if (err.request) {// client never received a response, or request never left \n      } else {// anything else \n      }\n    });\n  },\n  // Logout the user\n  logout: function logout(_ref3) {\n    var commit = _ref3.commit;\n    userService.logout();\n    commit('logout');\n  },\n  // register the user\n  registeruser: function registeruser(_ref4, user) {\n    var dispatch = _ref4.dispatch,\n        commit = _ref4.commit;\n    commit('registerRequest', user);\n    userService.register(user).then(function (user) {\n      commit('registerSuccess', user);\n      router.push('/login');\n    }, function (error) {\n      commit('registerFailure', error);\n      dispatch('notification/error', error, {\n        root: true\n      });\n    });\n  }\n};\nexport var mutations = {\n  loginRequest: function loginRequest(state, user) {\n    state.status = {\n      loggingIn: true\n    };\n    state.user = user;\n  },\n  loginSuccess: function loginSuccess(state, user) {\n    state.status = {\n      loggeduser: true\n    };\n    state.user = user;\n  },\n  loginFailure: function loginFailure(state) {\n    state.status = {\n      loggeduser: false\n    };\n    state.user = null;\n  },\n  logout: function logout(state) {\n    state.status = {};\n    state.user = null;\n  },\n  registerRequest: function registerRequest(state) {\n    state.status = {\n      registering: true\n    };\n  },\n  registerSuccess: function registerSuccess(state) {\n    state.status = {};\n  },\n  registerFailure: function registerFailure(state) {\n    state.status = {};\n  }\n};","map":{"version":3,"sources":["C:/Users/Max/Desktop/project1.0.0-main/src/state/modules/authfack.js"],"names":["userService","router","user","JSON","parse","localStorage","getItem","state","status","loggeduser","actions","loginF","dispatch","commit","login","password","then","push","catch","err","response","message","data","status_code","root","request","logout","registeruser","register","error","mutations","loginRequest","loggingIn","loginSuccess","loginFailure","registerRequest","registering","registerSuccess","registerFailure"],"mappings":"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","sourcesContent":["import { userService } from '../../helpers/authservice/user.service';\nimport router from '../../router/index'\n\nconst user = JSON.parse(localStorage.getItem('user'));\n\nexport const state = user ? { status: { loggeduser: true }, user } : { status: {}, user: null };\n\nexport const actions = {\n    // Logs in the user.\n    // eslint-disable-next-line no-unused-vars\n    loginF({ dispatch, commit }, { login, password }) {\n        commit('loginRequest', { login });\n\n        userService.login(login, password)\n            .then(\n                user => {\n                    commit('loginSuccess', user);\n                    router.push('/');\n\n\n                }\n            ).catch(err => {\n                if (err.response) {\n                    let message = '';\n                    switch (err.response.data.status_code) {\n                        case 400:\n                            message = 'login or password is invalid';\n                            break;\n\n                        case 400:\n                            message = 'login or password is invalid';\n                            break;\n\n                        default:\n                            message = 'We are so sorry, but authentification server is unreacheable';\n                            break;\n                    }\n\n                    commit('loginFailure', err);\n                    dispatch('notification/error', message, { root: true });\n                    // client received an error response (5xx, 4xx)\n                } else if (err.request) {\n                    // client never received a response, or request never left \n                } else {\n                    // anything else \n                }\n\n            });\n    },\n    // Logout the user\n    logout({ commit }) {\n        userService.logout();\n        commit('logout');\n    },\n    // register the user\n    registeruser({ dispatch, commit }, user) {\n        commit('registerRequest', user);\n        userService.register(user)\n            .then(\n                user => {\n                    commit('registerSuccess', user);\n\n                    router.push('/login');\n                },\n                error => {\n                    commit('registerFailure', error);\n                    dispatch('notification/error', error, { root: true });\n                }\n            );\n    }\n};\n\nexport const mutations = {\n    loginRequest(state, user) {\n        state.status = { loggingIn: true };\n        state.user = user;\n    },\n    loginSuccess(state, user) {\n        state.status = { loggeduser: true };\n        state.user = user;\n    },\n    loginFailure(state) {\n        state.status = { loggeduser: false };\n        state.user = null;\n    },\n    logout(state) {\n        state.status = {};\n        state.user = null;\n    },\n    registerRequest(state) {\n        state.status = { registering: true };\n    },\n    registerSuccess(state) {\n        state.status = {};\n    },\n    registerFailure(state) {\n        state.status = {};\n    }\n};"]},"metadata":{},"sourceType":"module"}