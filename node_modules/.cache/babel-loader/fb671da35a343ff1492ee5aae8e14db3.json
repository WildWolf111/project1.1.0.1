{"ast":null,"code":"import \"core-js/modules/es.function.name.js\";\nimport { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, createCommentVNode as _createCommentVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, vModelCheckbox as _vModelCheckbox, withCtx as _withCtx, createBlock as _createBlock } from \"vue\";\nvar _hoisted_1 = {\n  class: \"live-preview\"\n};\nvar _hoisted_2 = {\n  class: \"row g-3 needs-validation\",\n  novalidate: \"\"\n};\nvar _hoisted_3 = {\n  class: \"col-md-6 position-relative\"\n};\n\nvar _hoisted_4 = /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"validationTooltip03\",\n  class: \"form-label\"\n}, \"role\", -1\n/* HOISTED */\n);\n\nvar _hoisted_5 = /*#__PURE__*/_createElementVNode(\"p\", null, null, -1\n/* HOISTED */\n);\n\nvar _hoisted_6 = {\n  class: \"table table-primary table-striped align-middle table-nowrap mb-0\"\n};\n\nvar _hoisted_7 = /*#__PURE__*/_createElementVNode(\"th\", null, \"Endpoint path\", -1\n/* HOISTED */\n);\n\nvar _hoisted_8 = /*#__PURE__*/_createElementVNode(\"th\", null, \"Endpoint method\", -1\n/* HOISTED */\n);\n\nvar _hoisted_9 = /*#__PURE__*/_createElementVNode(\"th\", null, \"all\", -1\n/* HOISTED */\n);\n\nvar _hoisted_10 = {\n  class: \"form-check\"\n};\nvar _hoisted_11 = [\"checked\"];\n\nvar _hoisted_12 = /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"form-check-label\",\n  for: \"formCheck2\"\n}, null, -1\n/* HOISTED */\n);\n\nvar _hoisted_13 = /*#__PURE__*/_createElementVNode(\"td\", null, null, -1\n/* HOISTED */\n);\n\nvar _hoisted_14 = {\n  class: \"form-check\"\n};\nvar _hoisted_15 = [\"value\", \"onUpdate:modelValue\"];\n\nvar _hoisted_16 = /*#__PURE__*/_createElementVNode(\"label\", {\n  class: \"form-check-label\",\n  for: \"formCheck2\"\n}, null, -1\n/* HOISTED */\n);\n\nvar _hoisted_17 = /*#__PURE__*/_createElementVNode(\"p\", null, null, -1\n/* HOISTED */\n);\n\nvar _hoisted_18 = /*#__PURE__*/_createElementVNode(\"p\", null, null, -1\n/* HOISTED */\n);\n\nvar _hoisted_19 = {\n  class: \"col-12\"\n};\n\nvar _hoisted_20 = /*#__PURE__*/_createElementVNode(\"p\", null, null, -1\n/* HOISTED */\n);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  var _component_PageHeader = _resolveComponent(\"PageHeader\");\n\n  var _component_Layout = _resolveComponent(\"Layout\");\n\n  return _openBlock(), _createBlock(_component_Layout, null, {\n    default: _withCtx(function () {\n      return [_createVNode(_component_PageHeader), _createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"form\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_hoisted_4, _withDirectives(_createElementVNode(\"input\", {\n        type: \"text\",\n        class: \"form-control\",\n        id: \"validationTooltip03\",\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = function ($event) {\n          return $data.Role.name = $event;\n        })\n      }, null, 512\n      /* NEED_PATCH */\n      ), [[_vModelText, $data.Role.name]])]), _hoisted_5, _createElementVNode(\"div\", null, [_createElementVNode(\"table\", _hoisted_6, [_createElementVNode(\"thead\", null, [_createElementVNode(\"tr\", null, [_createCommentVNode(\" items \"), _hoisted_7, _hoisted_8, _hoisted_9, _createElementVNode(\"th\", null, [_createElementVNode(\"div\", _hoisted_10, [_createElementVNode(\"input\", {\n        class: \"form-check-input\",\n        type: \"checkbox\",\n        id: \"formCheck2\",\n        checked: $options.allSelected,\n        onClick: _cache[1] || (_cache[1] = function () {\n          return $options.selectAll && $options.selectAll.apply($options, arguments);\n        })\n      }, null, 8\n      /* PROPS */\n      , _hoisted_11), _hoisted_12])])])]), _createElementVNode(\"tbody\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.Permissions, function (Permission) {\n        return _openBlock(), _createElementBlock(\"tr\", {\n          key: Permission.id\n        }, [_createElementVNode(\"td\", null, _toDisplayString(Permission.path), 1\n        /* TEXT */\n        ), _createElementVNode(\"td\", null, _toDisplayString(Permission.method), 1\n        /* TEXT */\n        ), _hoisted_13, _createCommentVNode(\" delete Button \"), _createElementVNode(\"td\", null, [_createElementVNode(\"div\", _hoisted_14, [_withDirectives(_createElementVNode(\"input\", {\n          class: \"form-check-input\",\n          type: \"checkbox\",\n          id: \"formCheck2\",\n          unchecked: \"\",\n          value: Permission.id,\n          number: \"\",\n          \"onUpdate:modelValue\": function onUpdateModelValue($event) {\n            return Permission.selected = $event;\n          }\n        }, null, 8\n        /* PROPS */\n        , _hoisted_15), [[_vModelCheckbox, Permission.selected]]), _hoisted_16])])]);\n      }), 128\n      /* KEYED_FRAGMENT */\n      ))]), _hoisted_17])]), _hoisted_18, _createElementVNode(\"div\", _hoisted_19, [_createElementVNode(\"button\", {\n        class: \"btn btn-success\",\n        type: \"button\",\n        onClick: _cache[2] || (_cache[2] = function () {\n          return $options.AddRole && $options.AddRole.apply($options, arguments);\n        })\n      }, \"add\")]), _hoisted_20])])];\n    }),\n    _: 1\n    /* STABLE */\n\n  });\n}","map":{"version":3,"mappings":"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","names":["class","novalidate","_createElementVNode","for","_createBlock","_component_Layout","_createVNode","_component_PageHeader","_hoisted_4","type","id","$data","name","$event","_hoisted_5","_createCommentVNode","_hoisted_7","_hoisted_8","_hoisted_9","checked","$options","onClick","_hoisted_12","_createElementBlock","_Fragment","_renderList","Permission","key","_toDisplayString","path","method","_hoisted_13","unchecked","value","number","selected","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_20"],"sourceRoot":"","sources":["C:\\Users\\Max\\Desktop\\project1.0.0-main\\src\\views\\roles\\add.vue"],"sourcesContent":["<style>\r\n    .select2 {\r\n        width: 150px !important;\r\n    }\r\n    </style>\r\n    <script>\r\n    import Layout from \"../../layouts/main.vue\";\r\n    import PageHeader from \"@/components/page-header\";\r\n    import appConfig from \"../../../app.config\";\r\n    import Select2 from 'vue3-select2-component';\r\n\r\n    import RolesDataServise from \"/src/services/RolesDataServise\";\r\n\r\n    \r\n    export default {\r\n      jsonpage: {\r\n        title: \"Basic Elements\",\r\n        meta: [{ name: \"description\", content: appConfig.description }],\r\n      },\r\n      data() {\r\n        \r\n        return {\r\n          fields: [{ first: '',last: '' }],\r\n          title: \"Добавление новой роли\",\r\n          \r\n          PageRequest: {\r\n                        Fields: [{\r\n                        Name :'',\r\n                        Value:'',\r\n                        Operation:'',\r\n                        Order:'',\r\n                        }],\r\n                        PageNumber:0,\r\n                        PageLenght:0,\r\n                        TotalRecords:0,\r\n                        TotalPage:0,\r\n                    },\r\n                page: 1,\r\n                perPage: 1000,\r\n                pages: [],\r\n                jsonPages: {\r\n                            PageNumber: 0,\r\n                            TotalRecords:0,\r\n                },\r\n                jsonFields: [{\r\n                            name:'',\r\n                            value: ''\r\n                }],\r\n\r\n                search:\"\",\r\n\r\n                Permissions:[],\r\n\r\n                selected: [],\r\n\r\n                allSelected: false,\r\n                \r\n         \r\n          \r\n          \r\n          Role:{\r\n          \r\n            id:0,\r\n            name:'',\r\n\r\n          },  \r\n          \r\n\r\n        };\r\n        \r\n      },\r\n      components: {\r\n        Layout,\r\n        PageHeader,\r\n        Select2\r\n      },\r\n        methods: {\r\n            selectAll() {\r\n            let all_s = this.allSelected;\r\n            this.Permissions.forEach( itm => itm.selected = !all_s );\r\n            },\r\n    \r\n        AddRole() {\r\n\r\n\r\n          var data = {\r\n            \r\n              'name':this.Role.name,\r\n           \r\n\r\n    \r\n          };\r\n          \r\n    \r\n          RolesDataServise.create(data)\r\n            .then(response => {\r\n                \r\n                console.log(response)\r\n                \r\n              \r\n              this.Role.id = response.data.id;\r\n              \r\n              this.submitted = true;\r\n              if (response.status == 200){\r\n                      this.AddPerms(response.data.id)\r\n    }\r\n        \r\n        \r\n        else{\r\n        return response.data.message}\r\n            })\r\n            //.catch(e => {\r\n             // console.log(e);\r\n            //});\r\n           \r\n        },\r\n\r\n\r\n\r\n        \r\n        \r\n        newRole() {\r\n          this.submitted = false;\r\n          this.Role = {};\r\n        },\r\n    \r\n    \r\n        retrieveRoles() {\r\n       \r\n       this.jsonPages = {\r\n         pg_number:this.page,\r\n         pg_length: this.perPage\r\n     };\r\n\r\n     if (this.search!=\"\"){\r\n      this.jsonPages = [{\r\n         field:\"name\",\r\n         value: this.search\r\n      }];\r\n      }else{\r\n          this.jsonFields = [];\r\n      };\r\n      \r\n\r\n           \r\n      RolesDataServise.listPerms( this.jsonPages)\r\n           .then(response => {\r\n\r\n                 //dispatch('notification/success', 'Получение списка прошло успешно', { root: true });\r\n                 this.Permissions = response.data.List;\r\n\r\n                 console.log(response.data.List)\r\n\r\n                 this.perPage = response.data.pg_length;\r\n\r\n                 this.page = response.data.pg_number;\r\n                 \r\n                 let i=0;\r\n                 for(i=0; i<response.data.total_pg;i++){\r\n                 this.pages[i]=i+1;}\r\n                 })\r\n                 .catch(error => {\r\n                 //dispatch('notification/error', error, { root: true });\r\n                 console.log(error);\r\n                 });\r\n\r\n\r\n           },\r\n              AddPerms(role_id) {\r\n\r\n    console.log(this.selected)\r\n    var data = {\r\n        'role_id':role_id,\r\n        'perm_id':this.selected,\r\n        \r\n    };\r\n\r\n    RolesDataServise.addendpoints(data)\r\n      .then(response => {\r\n          \r\n          console.log(response)\r\n          \r\n        \r\n        this.Permission.id = response.data.id;\r\n        \r\n        this.submitted = true;\r\n        if (response.status == 200){\r\n                \r\n    }\r\n\r\n\r\n    else{\r\n    return response.data.message}\r\n      })\r\n      .catch(e => {\r\n      console.log(e);\r\n      });\r\n\r\n    },\r\n        \r\n      },\r\n    \r\n       mounted() {\r\n       this.retrieveRoles();\r\n\r\n      \r\n    \r\n      },\r\n      computed: {\r\n            allSelected() {\r\n            return this.Permissions.every(itm => itm.selected);\r\n            }\r\n      },\r\n      watch: {\r\n    Permissions: {\r\n      handler() {\r\n        this.selected = this.Permissions\r\n          .filter( itm => itm.selected )\r\n          .map( itm => itm.id );\r\n      },\r\n      deep: true\r\n    }\r\n  }\r\n    };\r\n    </script>\r\n    \r\n    <template>\r\n        <Layout>\r\n          <PageHeader/>\r\n          \r\n            <div class=\"live-preview\">\r\n                                 \r\n                              <form class=\"row g-3 needs-validation\" novalidate>\r\n                                      \r\n                                  \r\n                                  <div class=\"col-md-6 position-relative\">\r\n                                      <label for=\"validationTooltip03\" class=\"form-label\">role</label>\r\n                                      <input type=\"text\" class=\"form-control\" id=\"validationTooltip03\" v-model=\"Role.name\" >                                       \r\n                                  </div>\r\n  \r\n                                 \r\n                                    \r\n      <p>\r\n       \r\n          </p>\r\n    \r\n      \r\n       <div>\r\n      \r\n         <table class=\"table table-primary table-striped align-middle table-nowrap mb-0\">\r\n          <thead>\r\n              <tr>\r\n                    <!-- items -->\r\n                    \r\n                  \r\n               \r\n                  <th>Endpoint path</th>\r\n                  <th>Endpoint method</th>\r\n                  <th>all</th>\r\n                  <th>\r\n                    <div class=\"form-check\">\r\n                          <input class=\"form-check-input\" type=\"checkbox\" id=\"formCheck2\" :checked=\"allSelected\" @click=\"selectAll\" />                                                            \r\n                          <label class=\"form-check-label\" for=\"formCheck2\"></label>\r\n                    </div>\r\n                  </th>\r\n                \r\n                  \r\n                  \r\n                  \r\n              \r\n              </tr>\r\n          </thead>\r\n          <tbody>\r\n              <tr v-for=\"(Permission) in Permissions\" :key=\"Permission.id\">\r\n          \r\n                 \r\n                  \r\n                 \r\n                  <td >{{Permission.path}}</td>\r\n  \r\n                  <td >{{Permission.method}}</td>\r\n                  \r\n                 <td></td>\r\n                 \r\n                    <!-- delete Button -->\r\n                  <td>\r\n                    <div class=\"form-check\">\r\n                          <input class=\"form-check-input\" type=\"checkbox\" id=\"formCheck2\" unchecked  :value=\"Permission.id\" number v-model=\"Permission.selected\"/>                                                            \r\n                          <label class=\"form-check-label\" for=\"formCheck2\"></label>\r\n                    </div>\r\n                      \r\n                  </td>\r\n              \r\n              </tr>\r\n             \r\n          </tbody>\r\n          <p></p>\r\n          \r\n      </table>\r\n      \r\n       </div>\r\n      \r\n          <p>\r\n       \r\n          </p>\r\n        \r\n          <div class=\"col-12\">\r\n                        <button class=\"btn btn-success\" type=\"button\" @click=\"AddRole\">add</button>\r\n                       \r\n          </div>\r\n               <p>\r\n       \r\n          </p>\r\n        \r\n                          \r\n                                 \r\n                                 \r\n                                 \r\n                                 \r\n                                 \r\n                                  </form>\r\n                              </div>\r\n      \r\n      \r\n      \r\n      \r\n      \r\n          </Layout>\r\n      </template>\r\n    "]},"metadata":{},"sourceType":"module"}