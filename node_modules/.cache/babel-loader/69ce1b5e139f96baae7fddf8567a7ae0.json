{"remainingRequest":"C:\\Projects\\success\\project_v.1.0.0\\node_modules\\babel-loader\\lib\\index.js!C:\\Projects\\success\\project_v.1.0.0\\node_modules\\eslint-loader\\index.js??ref--14-0!C:\\Projects\\success\\project_v.1.0.0\\src\\authUtils.js","dependencies":[{"path":"C:\\Projects\\success\\project_v.1.0.0\\src\\authUtils.js","mtime":1650440853822},{"path":"C:\\Projects\\success\\project_v.1.0.0\\babel.config.js","mtime":1650437912703},{"path":"C:\\Projects\\success\\project_v.1.0.0\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650438243178},{"path":"C:\\Projects\\success\\project_v.1.0.0\\node_modules\\babel-loader\\lib\\index.js","mtime":1650438628271},{"path":"C:\\Projects\\success\\project_v.1.0.0\\node_modules\\eslint-loader\\index.js","mtime":1650438249788}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJDOi9Qcm9qZWN0cy9zdWNjZXNzL3Byb2plY3Rfdi4xLjAuMC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2suanMiOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIkM6L1Byb2plY3RzL3N1Y2Nlc3MvcHJvamVjdF92LjEuMC4wL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcy5qcyI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiQzovUHJvamVjdHMvc3VjY2Vzcy9wcm9qZWN0X3YuMS4wLjAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmpzb24uc3RyaW5naWZ5LmpzIjsKaW1wb3J0IGZpcmViYXNlIGZyb20gJ2ZpcmViYXNlL2NvbXBhdC9hcHAnOyAvLyBBZGQgdGhlIEZpcmViYXNlIHByb2R1Y3RzIHRoYXQgeW91IHdhbnQgdG8gdXNlCgppbXBvcnQgImZpcmViYXNlL2NvbXBhdC9hdXRoIjsKaW1wb3J0ICJmaXJlYmFzZS9jb21wYXQvZmlyZXN0b3JlIjsKCnZhciBGaXJlYmFzZUF1dGhCYWNrZW5kID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBGaXJlYmFzZUF1dGhCYWNrZW5kKGZpcmViYXNlQ29uZmlnKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBGaXJlYmFzZUF1dGhCYWNrZW5kKTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInJlZ2lzdGVyVXNlciIsIGZ1bmN0aW9uICh1c2VybmFtZSwgZW1haWwsIHBhc3N3b3JkKSB7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzCiAgICAgICAgZmlyZWJhc2UuYXV0aCgpLmNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZChlbWFpbCwgcGFzc3dvcmQpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgdmFyIHVzZXIgPSBmaXJlYmFzZS5hdXRoKCkuY3VycmVudFVzZXIudXBkYXRlUHJvZmlsZSh7CiAgICAgICAgICAgIGRpc3BsYXlOYW1lOiB1c2VybmFtZQogICAgICAgICAgfSk7CiAgICAgICAgICByZXNvbHZlKHVzZXIpOwogICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgICAgcmVqZWN0KF90aGlzLl9oYW5kbGVFcnJvcihlcnJvcikpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAibG9naW5Vc2VyIiwgZnVuY3Rpb24gKGVtYWlsLCBwYXNzd29yZCkgewogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIHZhciBkYXRhID0gewogICAgICAgICAgbG9naW5fdXNlcjogX3RoaXMuZW1haWwsCiAgICAgICAgICBwYXNzd29yZF91c2VyOiBfdGhpcy5wYXNzd29yZAogICAgICAgIH07CiAgICAgICAgYXhpb3MucG9zdCgiL2FwaS92Mi91c2Vycy9hdXRoIiwgZGF0YSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIHZhciB1c2VyID0gcmVzcG9uc2UuZGF0YTsKICAgICAgICAgIHJlc29sdmUodXNlcik7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIHJlamVjdChfdGhpcy5faGFuZGxlRXJyb3IoZSkpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiZm9yZ2V0UGFzc3dvcmQiLCBmdW5jdGlvbiAoZW1haWwpIHsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICBmaXJlYmFzZS5hdXRoKCkuc2VuZFBhc3N3b3JkUmVzZXRFbWFpbChlbWFpbCwgewogICAgICAgICAgdXJsOiB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgKyAiLy8iICsgd2luZG93LmxvY2F0aW9uLmhvc3QgKyAiL2xvZ2luIgogICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgcmVzb2x2ZSh0cnVlKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIHJlamVjdChfdGhpcy5faGFuZGxlRXJyb3IoZXJyb3IpKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgImxvZ291dCIsIGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgICAgICBmaXJlYmFzZS5hdXRoKCkuc2lnbk91dCgpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgcmVzb2x2ZSh0cnVlKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgICAgIHJlamVjdChfdGhpcy5faGFuZGxlRXJyb3IoZXJyb3IpKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9KTsKCiAgICBfZGVmaW5lUHJvcGVydHkodGhpcywgInNldExvZ2dlZWRJblVzZXIiLCBmdW5jdGlvbiAodXNlcikgewogICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCJhdXRoVXNlciIsIEpTT04uc3RyaW5naWZ5KHVzZXIpKTsKICAgIH0pOwoKICAgIF9kZWZpbmVQcm9wZXJ0eSh0aGlzLCAiZ2V0QXV0aGVudGljYXRlZFVzZXIiLCBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICghc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgnYXV0aFVzZXInKSkgcmV0dXJuIG51bGw7CiAgICAgIHJldHVybiBKU09OLnBhcnNlKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2F1dGhVc2VyJykpOwogICAgfSk7CgogICAgaWYgKGZpcmViYXNlQ29uZmlnKSB7CiAgICAgIC8vIEluaXRpYWxpemUgRmlyZWJhc2UKICAgICAgZmlyZWJhc2UuaW5pdGlhbGl6ZUFwcChmaXJlYmFzZUNvbmZpZyk7CiAgICAgIGZpcmViYXNlLmF1dGgoKS5vbkF1dGhTdGF0ZUNoYW5nZWQoZnVuY3Rpb24gKHVzZXIpIHsKICAgICAgICBpZiAodXNlcikgewogICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgiYXV0aFVzZXIiLCBKU09OLnN0cmluZ2lmeSh1c2VyKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnJlbW92ZUl0ZW0oJ2F1dGhVc2VyJyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9CiAgLyoqDQogICAqIFJlZ2lzdGVycyB0aGUgdXNlciB3aXRoIGdpdmVuIGRldGFpbHMNCiAgICovCgoKICBfY3JlYXRlQ2xhc3MoRmlyZWJhc2VBdXRoQmFja2VuZCwgW3sKICAgIGtleTogIl9oYW5kbGVFcnJvciIsCiAgICB2YWx1ZToKICAgIC8qKg0KICAgICAqIEhhbmRsZSB0aGUgZXJyb3INCiAgICAgKiBAcGFyYW0geyp9IGVycm9yIA0KICAgICAqLwogICAgZnVuY3Rpb24gX2hhbmRsZUVycm9yKGVycm9yKSB7CiAgICAgIHZhciBlcnJvck1lc3NhZ2UgPSBlcnJvci5tZXNzYWdlOwogICAgICByZXR1cm4gZXJyb3JNZXNzYWdlOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIEZpcmViYXNlQXV0aEJhY2tlbmQ7Cn0oKTsKCnZhciBfZmlyZUJhc2VCYWNrZW5kID0gbnVsbDsKLyoqDQogKiBJbml0aWxpemUgdGhlIGJhY2tlbmQNCiAqIEBwYXJhbSB7Kn0gY29uZmlnIA0KICovCgp2YXIgaW5pdEZpcmViYXNlQmFja2VuZCA9IGZ1bmN0aW9uIGluaXRGaXJlYmFzZUJhY2tlbmQoY29uZmlnKSB7CiAgaWYgKCFfZmlyZUJhc2VCYWNrZW5kKSB7CiAgICBfZmlyZUJhc2VCYWNrZW5kID0gbmV3IEZpcmViYXNlQXV0aEJhY2tlbmQoY29uZmlnKTsKICB9CgogIHJldHVybiBfZmlyZUJhc2VCYWNrZW5kOwp9OwovKioNCiAqIFJldHVybnMgdGhlIGZpcmViYXNlIGJhY2tlbmQNCiAqLwoKCnZhciBnZXRGaXJlYmFzZUJhY2tlbmQgPSBmdW5jdGlvbiBnZXRGaXJlYmFzZUJhY2tlbmQoKSB7CiAgcmV0dXJuIF9maXJlQmFzZUJhY2tlbmQ7Cn07CgpleHBvcnQgeyBpbml0RmlyZWJhc2VCYWNrZW5kLCBnZXRGaXJlYmFzZUJhY2tlbmQgfTs="},{"version":3,"sources":["C:/Projects/success/project_v.1.0.0/src/authUtils.js"],"names":["firebase","FirebaseAuthBackend","firebaseConfig","username","email","password","Promise","resolve","reject","auth","createUserWithEmailAndPassword","then","res","user","currentUser","updateProfile","displayName","error","_handleError","data","login_user","password_user","axios","post","response","catch","e","sendPasswordResetEmail","url","window","location","protocol","host","signOut","sessionStorage","setItem","JSON","stringify","getItem","parse","initializeApp","onAuthStateChanged","removeItem","errorMessage","message","_fireBaseBackend","initFirebaseBackend","config","getFirebaseBackend"],"mappings":"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","sourcesContent":["import firebase from 'firebase/compat/app';\r\n// Add the Firebase products that you want to use\r\nimport \"firebase/compat/auth\";\r\nimport \"firebase/compat/firestore\";\r\n\r\nclass FirebaseAuthBackend {\r\n    constructor(firebaseConfig) {\r\n        if (firebaseConfig) {\r\n            // Initialize Firebase\r\n            firebase.initializeApp(firebaseConfig);\r\n            firebase.auth().onAuthStateChanged((user) => {\r\n                if (user) {\r\n                    sessionStorage.setItem(\"authUser\", JSON.stringify(user));\r\n                } else {\r\n                    sessionStorage.removeItem('authUser');\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Registers the user with given details\r\n     */\r\n    registerUser = (username, email, password) => {\r\n        return new Promise((resolve, reject) => {\r\n            // eslint-disable-next-line no-unused-vars\r\n            firebase.auth().createUserWithEmailAndPassword(email, password).then((res) => {\r\n                let user = firebase.auth().currentUser.updateProfile({\r\n                    displayName: username\r\n                });\r\n                resolve(user);\r\n            }, (error) => {\r\n                reject(this._handleError(error));\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Login user with given details\r\n     */\r\n    loginUser = (email, password) => {\r\n        return new Promise((resolve, reject) => {\r\n            var data = {\r\n                login_user: this.email,\r\n                password_user: this.password,\r\n            };\r\n            axios.post(\"/api/v2/users/auth\", data).then(response => {\r\n                    var user = response.data;\r\n                    resolve(user);\r\n                })\r\n                .catch(e => {\r\n                    reject(this._handleError(e));\r\n                });\r\n\r\n        });\r\n    }\r\n\r\n    /**\r\n     * forget Password user with given details\r\n     */\r\n    forgetPassword = (email) => {\r\n        return new Promise((resolve, reject) => {\r\n            firebase.auth().sendPasswordResetEmail(email, { url: window.location.protocol + \"//\" + window.location.host + \"/login\" }).then(() => {\r\n                resolve(true);\r\n            }).catch((error) => {\r\n                reject(this._handleError(error));\r\n            })\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Logout the user\r\n     */\r\n    logout = () => {\r\n        return new Promise((resolve, reject) => {\r\n            firebase.auth().signOut().then(() => {\r\n                resolve(true);\r\n            }).catch((error) => {\r\n                reject(this._handleError(error));\r\n            })\r\n        });\r\n    }\r\n\r\n    setLoggeedInUser = (user) => {\r\n        sessionStorage.setItem(\"authUser\", JSON.stringify(user));\r\n    }\r\n\r\n    /**\r\n     * Returns the authenticated user\r\n     */\r\n    getAuthenticatedUser = () => {\r\n        if (!sessionStorage.getItem('authUser'))\r\n            return null;\r\n        return JSON.parse(sessionStorage.getItem('authUser'));\r\n    }\r\n\r\n    /**\r\n     * Handle the error\r\n     * @param {*} error \r\n     */\r\n    _handleError(error) {\r\n        var errorMessage = error.message;\r\n        return errorMessage;\r\n    }\r\n}\r\n\r\nlet _fireBaseBackend = null;\r\n\r\n/**\r\n * Initilize the backend\r\n * @param {*} config \r\n */\r\nconst initFirebaseBackend = (config) => {\r\n    if (!_fireBaseBackend) {\r\n        _fireBaseBackend = new FirebaseAuthBackend(config);\r\n    }\r\n    return _fireBaseBackend;\r\n}\r\n\r\n/**\r\n * Returns the firebase backend\r\n */\r\nconst getFirebaseBackend = () => {\r\n    return _fireBaseBackend;\r\n}\r\n\r\nexport { initFirebaseBackend, getFirebaseBackend };"]}]}