{"ast":null,"code":"import _defineProperty from \"C:/Users/Max/Desktop/project1.0.0-main/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.split.js\";\nimport \"core-js/modules/es.array.splice.js\";\nimport \"core-js/modules/es.string.search.js\";\nimport \"core-js/modules/es.function.name.js\";\nimport Layout from \"../../layouts/main.vue\";\nimport PageHeader from \"@/components/page-header\";\nimport appConfig from \"../../../app.config\";\nimport Select2 from 'vue3-select2-component';\nimport ProductsDataService from \"/src/services/ProductsDataService\";\nimport DocumentsDataService from \"/src/services/DocumentsDataService\";\nimport CompaniesDataService from \"/src/services/CompaniesDataService\";\nimport Warehouse_cellDataService from \"/src/services/Warehouse_cellDataService\";\nimport WarehouseDataService from \"/src/services/WarehouseDataService\";\nimport GTDDataService from \"/src/services/GTDDataService\";\nimport moment from \"moment-timezone\";\nexport default {\n  jsonpage: {\n    title: \"Basic Elements\",\n    meta: [{\n      name: \"description\",\n      content: appConfig.description\n    }]\n  },\n  data: function data() {\n    var _ref;\n\n    return _ref = {\n      fields: [{\n        first: '',\n        last: ''\n      }],\n      title: \"Добавление нового документа\",\n      PageRequest: {\n        Fields: [{\n          Name: '',\n          Value: '',\n          Operation: '',\n          Order: ''\n        }],\n        PageNumber: 0,\n        PageLenght: 0,\n        TotalRecords: 0,\n        TotalPage: 0\n      },\n      page: 1,\n      perPage: 7,\n      pages: [],\n      jsonPages: {\n        PageNumber: 0,\n        TotalRecords: 0\n      },\n      jsonFields: [{\n        name: '',\n        value: ''\n      }],\n      search: \"\",\n      Document: {\n        Id: 0,\n        DocumentType: {\n          id: 2,\n          name: ''\n        },\n        CompanySender: {\n          Id: '',\n          Name: ''\n        },\n        CompanyRecipient: {\n          Id: '',\n          Name: ''\n        },\n        Status: {\n          Id: '',\n          Name: ''\n        },\n        Items: [],\n        Comment: '',\n        PriceType: {\n          Id: '',\n          Name: ''\n        },\n        DeadLine: '',\n        Sum: ''\n      },\n      Companies: [{\n        id: -1,\n        text: \"\"\n      }],\n      GTDs: [{\n        id: -1,\n        text: \"\"\n      }],\n      Products: [{\n        id: -1,\n        text: \"\"\n      }],\n      Warehouses: [{\n        id: -1,\n        text: \"\"\n      }],\n      WarehouseCells: [{\n        id: -1,\n        text: \"\"\n      }],\n      Statuses: [{\n        id: -1,\n        text: \"\"\n      }]\n    }, _defineProperty(_ref, \"jsonPages\", {\n      PageNumber: 1,\n      TotalRecords: 100\n    }), _defineProperty(_ref, \"jsonFields\", [{\n      name: '',\n      value: ''\n    }]), _ref;\n  },\n  components: {\n    Layout: Layout,\n    PageHeader: PageHeader,\n    Select2: Select2\n  },\n  methods: {\n    getDocument: function getDocument(id) {\n      var _this = this;\n\n      DocumentsDataService.get(id).then(function (response) {\n        _this.Document = response.data; //this.Document.Deadline = new Date( Date.parse(this.Document.Deadline) );\n\n        _this.Document.Deadline = _this.Document.Deadline.split('T')[0];\n        console.log(\"--------------------\");\n        console.log(_this.Document);\n      }).catch(function (e) {\n        console.log(e);\n      });\n    },\n    //добавление новой строки\n    AddField: function AddField() {\n      this.submitted = false;\n      this.Document.Items.push({\n        Id: '',\n        TrustedSignId: '',\n        Product: {\n          Id: '',\n          Name: ''\n        },\n        Quantity: '',\n        Price: '',\n        GTD: {\n          Id: '',\n          NumId: ''\n        },\n        Warehouse: {\n          Id: '',\n          Name: ''\n        },\n        WarehouseCell: {\n          Id: '',\n          Name: ''\n        }\n      });\n    },\n    //добавление новой строки(конец)\n    //удаление строки\n    RemoveField: function RemoveField(index) {\n      this.Document.Items.splice(index, 1);\n    },\n    //удаление строки конец\n    //полчение продукта (start)\n    retrieveProducts: function retrieveProducts() {\n      var _this2 = this;\n\n      this.jsonPages = {\n        pg_number: 1,\n        pg_length: 1000\n      };\n\n      if (this.search != \"\") {\n        this.jsonFields = [{\n          field: \"name\",\n          value: this.search\n        }];\n      } else {\n        this.jsonFields = [];\n      }\n\n      ProductsDataService.getAll(this.jsonPages).then(function (response) {\n        var i = 0;\n\n        for (i = 0; i < response.data.total_rec; i++) {\n          var currentProduct = response.data.List[i];\n          _this2.Products[i] = {\n            id: currentProduct.Id,\n            text: currentProduct.Name\n          };\n        } //this.Brands = response.data.Brands;\n\n      }).catch(function (e) {\n        console.log(e);\n      });\n    },\n    //конец блока (end)\n    //получение компаний\n    retrieveCompanies: function retrieveCompanies() {\n      var _this3 = this;\n\n      this.jsonPages = {\n        pg_number: this.page,\n        pg_length: this.perPage\n      };\n\n      if (this.search != \"\") {\n        this.jsonFields = [{\n          field: \"name\",\n          value: this.search\n        }];\n      } else {\n        this.jsonFields = [];\n      }\n\n      CompaniesDataService.getAll(this.jsonFields, [], this.jsonPages).then(function (response) {\n        var i = 0;\n\n        for (i = 0; i < response.data.total_rec; i++) {\n          var currentCompany = response.data.List[i];\n          _this3.Companies[i] = {\n            id: currentCompany.id,\n            text: currentCompany.name\n          };\n        }\n      }).catch(function (e) {\n        console.log(e);\n      });\n    },\n    //конец\n    //получение складских ячеек\n    retrieveWarehouseCells: function retrieveWarehouseCells() {\n      var _this4 = this;\n\n      this.jsonPages = {\n        pg_number: this.page,\n        pg_length: this.perPage\n      };\n\n      if (this.search != \"\") {\n        this.jsonFields = [{\n          field: \"name\",\n          value: this.search\n        }];\n      } else {\n        this.jsonFields = [];\n      }\n\n      Warehouse_cellDataService.getAll(this.jsonFields, [], this.jsonPages).then(function (response) {\n        var i = 0;\n\n        for (i = 0; i < response.data.pg_length; i++) {\n          var currentWarehouse_cell = response.data.List[i];\n          _this4.WarehouseCells[i] = {\n            id: currentWarehouse_cell.id,\n            text: currentWarehouse_cell.name\n          };\n        }\n      }).catch(function (e) {\n        console.log(e);\n      });\n    },\n    retrieveWarehouses: function retrieveWarehouses() {\n      var _this5 = this;\n\n      this.jsonPages = {\n        pg_number: this.page,\n        pg_length: this.perPage\n      };\n\n      if (this.search != \"\") {\n        this.jsonFields = [{\n          field: \"name\",\n          value: this.search\n        }];\n      } else {\n        this.jsonFields = [];\n      }\n\n      WarehouseDataService.getAll(this.jsonFields, [], this.jsonPages).then(function (response) {\n        var i = 0;\n\n        for (i = 0; i < response.data.total_rec; i++) {\n          var currentWarehouse = response.data.List[i];\n          _this5.Warehouses[i] = {\n            id: currentWarehouse.id,\n            text: currentWarehouse.name\n          };\n        }\n      }).catch(function (e) {\n        console.log(e);\n      });\n    },\n    ///////////////////   GTD   ///////////////////\n    retrieveGTDs: function retrieveGTDs() {\n      var _this6 = this;\n\n      this.jsonPages = {\n        pg_number: this.page,\n        pg_length: this.perPage\n      };\n\n      if (this.search != \"\") {\n        this.jsonFields = [{\n          field: \"name\",\n          value: this.search\n        }];\n      } else {\n        this.jsonFields = [];\n      }\n\n      GTDDataService.getAll(this.jsonFields, [], this.jsonPages).then(function (response) {\n        _this6.perPage = response.data.pg_length;\n        _this6.page = response.data.pg_number;\n\n        for (var i = 0; i < response.data.List.length; i++) {\n          var currentGTD = response.data.List[i];\n          _this6.GTDs[i] = {\n            id: currentGTD.id,\n            text: currentGTD.num_id\n          };\n        }\n      }).catch(function (e) {\n        console.log(e);\n      });\n    },\n    updateDocument: function updateDocument() {\n      var _this7 = this;\n\n      this.Document.Deadline = new Date(Date.parse(this.Document.Deadline)).toISOString();\n      console.log('8888888888888888888', this.Document);\n      DocumentsDataService.update(this.Document.id, this.Document).then(function (response) {\n        _this7.message = 'The Document was updated successfully!';\n\n        if (response.data.status_code == 200) {\n          console.log(\"*************\");\n          console.log(response.data.status_code);\n          console.log(response.data.message);\n          console.log(\"*************\");\n\n          _this7.$router.push({\n            path: \"/documents\"\n          });\n        } else {\n          return response.data.message;\n        }\n      }).catch(function (e) {\n        console.log(e);\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.retrieveWarehouseCells();\n    this.retrieveCompanies();\n    this.retrieveWarehouses();\n    this.retrieveProducts();\n    this.retrieveGTDs(); //this.retrieveWarehouseCells();\n\n    this.getDocument(this.$route.params.id);\n  }\n};","map":{"version":3,"mappings":"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","names":["Layout","PageHeader","appConfig","Select2","ProductsDataService","DocumentsDataService","CompaniesDataService","Warehouse_cellDataService","WarehouseDataService","GTDDataService","moment","jsonpage","title","meta","name","content","description","data","fields","first","last","PageRequest","Fields","Name","Value","Operation","Order","PageNumber","PageLenght","TotalRecords","TotalPage","page","perPage","pages","jsonPages","jsonFields","value","search","Document","Id","DocumentType","id","CompanySender","CompanyRecipient","Status","Items","Comment","PriceType","DeadLine","Sum","Companies","text","GTDs","Products","Warehouses","WarehouseCells","Statuses","components","methods","getDocument","get","then","response","Deadline","split","console","log","catch","e","AddField","submitted","push","TrustedSignId","Product","Quantity","Price","GTD","NumId","Warehouse","WarehouseCell","RemoveField","index","splice","retrieveProducts","pg_number","pg_length","field","getAll","i","total_rec","currentProduct","List","retrieveCompanies","currentCompany","retrieveWarehouseCells","currentWarehouse_cell","retrieveWarehouses","currentWarehouse","retrieveGTDs","length","currentGTD","num_id","updateDocument","Date","parse","toISOString","update","message","status_code","$router","path","mounted","$route","params"],"sourceRoot":"","sources":["C:\\Users\\Max\\Desktop\\project1.0.0-main\\src\\views\\documents\\edit.vue"],"sourcesContent":["<style>\n.select2 {\n    width: 150px !important;\n}\n</style>\n<script>\nimport Layout from \"../../layouts/main.vue\";\nimport PageHeader from \"@/components/page-header\";\nimport appConfig from \"../../../app.config\";\nimport Select2 from 'vue3-select2-component';\nimport ProductsDataService from \"/src/services/ProductsDataService\";\nimport DocumentsDataService from \"/src/services/DocumentsDataService\";\nimport CompaniesDataService from \"/src/services/CompaniesDataService\";\nimport Warehouse_cellDataService from \"/src/services/Warehouse_cellDataService\";\nimport WarehouseDataService from \"/src/services/WarehouseDataService\";\nimport GTDDataService from \"/src/services/GTDDataService\";\nimport moment from \"moment-timezone\";\n\nexport default {\n  jsonpage: {\n    title: \"Basic Elements\",\n    meta: [{ name: \"description\", content: appConfig.description }],\n  },\n  data() {\n    \n    return {\n      fields: [{ first: '',last: '' }],\n      title: \"Добавление нового документа\",\n      \n      PageRequest: {\n                        Fields: [{\n                        Name :'',\n                        Value:'',\n                        Operation:'',\n                        Order:'',\n                        }],\n                        PageNumber:0,\n                        PageLenght:0,\n                        TotalRecords:0,\n                        TotalPage:0,\n                    },\n                page: 1,\n                perPage: 7,\n                pages: [],\n                jsonPages: {\n                            PageNumber: 0,\n                            TotalRecords:0,\n                },\n                jsonFields: [{\n                            name:'',\n                            value: ''\n                }],\n\n                search:\"\",\n      \n      \n     Document:{\n    Id:0,\n    DocumentType:{\n      id:2,\n      name:''\n    },\n    CompanySender:{\n          Id:'',\n          Name:''\n      },\n    CompanyRecipient:{\n          Id:'',\n          Name:''\n      },\n        Status:{\n          Id:'',\n          Name:''\n        },\n    Items:[],\n    Comment:'',\n  \n    PriceType:{\n        Id:'',\n        Name:'',\n      },\n    DeadLine: '',\n    Sum:'',\n      },\n  Companies:[\n          {\n            id:-1,\n            text:\"\"\n          }\n        ],\n  GTDs:[\n          {\n            id:-1,\n            text:\"\"\n          }\n        ],\n  Products:[\n          {\n            id:-1,\n            text:\"\"\n          }\n        ],\n  Warehouses:[\n          {\n            id:-1,\n            text:\"\"\n          }\n        ],\n  WarehouseCells:[\n          {\n            id:-1,\n            text:\"\"\n          }\n        ],\n\n  Statuses:[\n          {\n            id:-1,\n            text:\"\"\n          }\n        ],\n\n    jsonPages: {\n                PageNumber: 1,\n                TotalRecords: 100\n      },\n       jsonFields: [{\n                name:'',\n                value: ''\n      }],\n        \n    };\n    \n  },\n  components: {\n    Layout,\n    PageHeader,\n    Select2\n  },\n    methods: {\n\n\n\n         getDocument(id) {\n       \n       DocumentsDataService.get(id)\n        .then(response => {\n           this.Document = response.data;\n           //this.Document.Deadline = new Date( Date.parse(this.Document.Deadline) );\n          \n          this.Document.Deadline = this.Document.Deadline.split('T')[0];\n          console.log(\"--------------------\")\n          console.log(this.Document)\n        })\n        .catch(e => {\n          console.log(e);\n        });\n    },\n      //добавление новой строки\n       AddField: function () {\n\n          this.submitted = false;\n \n          \n      this.Document.Items.push({\n        Id:'',\n        TrustedSignId:'',\n        Product:{\n          Id:'',\n          Name:'',\n        } ,\n        Quantity:'',\n        Price:'',\n        GTD:{\n          Id:'',\n          NumId:''\n        },\n        Warehouse:{\n          Id:'',\n          Name:'',\n        },\n        WarehouseCell:{\n          Id:'',\n          Name:'',\n        },\n        \n        });\n      \n    }, //добавление новой строки(конец)\n      \n      \n            //удаление строки\n      RemoveField: function(index){\n\n        this.Document.Items.splice(index,1);\n\n      },//удаление строки конец\n      \n\n     //полчение продукта (start)\n        retrieveProducts(){\n      this.jsonPages = {\n               pg_number:1,\n                  pg_length: 1000\n            };\n         \n            if (this.search!=\"\"){\n            this.jsonFields = [{\n                field:\"name\",\n                value: this.search\n            }];\n            }else{\n                this.jsonFields = [];\n            }\n\n\n\n            ProductsDataService.getAll(this.jsonPages)\n        .then(response => {\n\n         let i=0;\n          for(i=0; i<response.data.total_rec;i++){\n               let currentProduct = response.data.List[i];\n                this.Products[i]={\n        \n                id:currentProduct.Id,\n                text:currentProduct.Name  \n\n              };\n }\n          //this.Brands = response.data.Brands;\n        })\n        .catch(e => {\n          console.log(e);\n        });\n    },//конец блока (end)\n\n\n\n\n//получение компаний\nretrieveCompanies() {\n      \n         \n        this.jsonPages = {\n          pg_number:this.page,\n          pg_length: this.perPage\n      };\n\n      if (this.search!=\"\"){\n       this.jsonFields = [{\n          field:\"name\",\n          value: this.search\n       }];\n       }else{\n           this.jsonFields = [];\n       }\n\n\n       CompaniesDataService.getAll(this.jsonFields,[],this.jsonPages)\n        .then(response => {\n       \n           \n           \n          let i=0;\n          for(i=0; i<response.data.total_rec;i++){\n               let currentCompany = response.data.List[i];\n              \n               this.Companies[i]={\n        \n                id:currentCompany.id,\n                text:currentCompany.name  \n\n              };\n          }\n\n        })\n        .catch(e => {\n          console.log(e);\n        });\n\n        \n    },//конец\n\n//получение складских ячеек\n    retrieveWarehouseCells() {\n\n        this.jsonPages = {\n          pg_number:this.page,\n          pg_length: this.perPage\n      };\n\n      if (this.search!=\"\"){\n       this.jsonFields = [{\n          field:\"name\",\n          value: this.search\n       }];\n       }else{\n           this.jsonFields = [];\n       }\n\n\n       Warehouse_cellDataService.getAll(this.jsonFields,[],this.jsonPages)\n        .then(response => {\n     \n         \n         let i=0;\n          for(i=0; i<response.data.pg_length;i++){\n               let currentWarehouse_cell = response.data.List[i];\n              \n               this.WarehouseCells[i]={\n        \n                id:currentWarehouse_cell.id,\n                text:currentWarehouse_cell.name  \n\n              };\n          }\n  \n\n         \n        })\n        .catch(e => {\n          console.log(e);\n        });\n    },\n\n\n\n\n\n retrieveWarehouses() {\n     \n        this.jsonPages = {\n          pg_number:this.page,\n          pg_length: this.perPage\n      };\n\n      if (this.search!=\"\"){\n       this.jsonFields = [{\n          field:\"name\",\n          value: this.search\n       }];\n       }else{\n           this.jsonFields = [];\n       }\n\n\n       WarehouseDataService.getAll(this.jsonFields,[],this.jsonPages)\n        .then(response => {\n     \n\n         let i=0;\n          for(i=0; i<response.data.total_rec;i++){\n               let currentWarehouse = response.data.List[i];\n         \n               this.Warehouses[i]={\n        \n                id:currentWarehouse.id,\n                text:currentWarehouse.name  \n\n              };\n          }\n      \n        })\n        .catch(e => {\n          console.log(e);\n        });\n    },\n\n\n\n///////////////////   GTD   ///////////////////\n\n  retrieveGTDs() {\n     \n        this.jsonPages = {\n          pg_number:this.page,\n          pg_length: this.perPage\n      };\n\n      if (this.search!=\"\"){\n       this.jsonFields = [{\n          field:\"name\",\n          value: this.search\n       }];\n       }else{\n           this.jsonFields = [];\n       }\n\n\n       GTDDataService.getAll(this.jsonFields,[],this.jsonPages)\n        .then(response => {\n   \n        this.perPage = response.data.pg_length;\n          \n          this.page = response.data.pg_number;\n                \n               \n               \n              \n           for(let i = 0; i < response.data.List.length; i++){\n\n              let currentGTD = response.data.List[i];\n           \n              this.GTDs[i]={\n                \n                id:currentGTD.id,\n\n                text:currentGTD.num_id \n\n              };\n\n      }\n     \n      \n        })\n        .catch(e => {\n          console.log(e);\n        });\n    },\n    \n\n  updateDocument() {\n\n\n\n     this.Document.Deadline = new Date( Date.parse(this.Document.Deadline)).toISOString();\nconsole.log('8888888888888888888',this.Document);\n      DocumentsDataService.update(this.Document.id, this.Document)\n       \n        .then(response => {\n         \n          this.message = 'The Document was updated successfully!';\n        if (response.data.status_code == 200){\n          \n          console.log(\"*************\")\n          console.log(response.data.status_code)\n          console.log(response.data.message)\n          console.log(\"*************\")\n        \n        this.$router.push({path: \"/documents\"})}\n        \n        \n        else{\n        return response.data.message}\n        })\n        \n        .catch(e => {\n          console.log(e);\n        });\n        \n    },\n\n\n  },\n\n   mounted() {\n   this.retrieveWarehouseCells();\n   this.retrieveCompanies();\n   this.retrieveWarehouses();\n   this.retrieveProducts();\n   this.retrieveGTDs();\n   //this.retrieveWarehouseCells();\n    this.getDocument(this.$route.params.id);\n\n  },\n    \n};\n</script>\n\n<template>\n  <Layout>\n    <PageHeader :title=\"title\" :items=\"items\" />\n    \n      <div class=\"live-preview\">\n                            <form class=\"row g-3 needs-validation\" novalidate>\n                                <div class=\"col-md-4 position-relative\">\n                                <label for=\"exampleDataList\" class=\"form-label\" >От кого</label>\n                                <Select2 v-model.number=\"Document.CompanySender.id\" :options=\"this.Companies\"/>\n\n                            </div>\n\n\n\n                                <div class=\"col-md-4 position-relative\">\n                                    <label for=\"exampleDataList\" class=\"form-label\" >Кому</label>\n                                     <Select2 v-model.number=\"Document.CompanyRecipient.id\" :options=\"this.Companies\"/>\n\n                                </div>\n\n\n\n\n\n\n                                <div class=\"col-md-6 position-relative\">\n                                    <label for=\"validationTooltip03\" class=\"form-label\">Коментарий</label>\n                                    <input type=\"text\" class=\"form-control\" id=\"validationTooltip03\"  v-model=\"Document.сomment\">\n                                   \n                                </div>\n\n                               \n\n                            <div class=\"col-xxl-3 col-md-6\">\n                                    <div>\n                                        <label for=\"exampleInputdate\" class=\"form-label\">Дата исполнения</label>\n                                        <input type=\"date\" class=\"form-control\" id=\"exampleInputdate\" v-model=\"Document.Deadline\">\n                                    </div>\n                            </div>\n\n\n\n\n                              \n<p>\n \n    </p>\n\n\n\n\n\n <div>\n\n   <table class=\"table table-primary table-striped align-middle table-nowrap mb-0\">\n    <thead>\n        <tr>\n              <!-- items -->\n              \n            <th >Product</th>\n         \n            <th>Warehousecell</th>\n            \n            <th >Quantity</th>\n            <th >Price</th>\n            <th >TrustedSignId</th>\n            <th ></th>\n            \n            \n            \n        \n        </tr>\n    </thead>\n    <tbody>\n        <tr v-for=\"(Item,index) in Document.Items\" :key=\"Item.id\">\n    \n           \n            <td><Select2 v-model.number=\"Item.Product.id\" :options='this.Products' @class=\"bigdrop\"/></td>\n            \n            <td ><Select2 v-model.number=\"Item.WarehouseCell.id\" :options='this.WarehouseCells' @class=\"bigdrop\"/></td>\n            \n            <td><input type=\"text\" v-model.number=\"Item.quantity\"></td>\n            <td ><input type=\"text\" v-model.number=\"Item.price\"></td>\n            <td ><input type=\"text\" v-model.number=\"Item.trusted_sign_id\"></td>\n           \n              <!-- delete Button -->\n            <td>\n                <a href=\"javascript:void(0);\" class=\"link-danger fs-15\"><i class=\"ri-delete-bin-line\" @click=\"RemoveField(index)\"></i></a>\n            </td>\n        \n        </tr>\n       \n    </tbody>\n    <p></p>\n    \n</table>\n\n </div>\n\n    <p>\n \n    </p>\n  \n    <div class=\"col-12\">\n                  <button class=\"btn btn-success\" type=\"button\" @click=\"updateDocument\">Update</button>\n                 <font color=\"white\">|||</font>\n                   <input type=\"button\" value=\"add new row\"  class=\"btn btn-warning\" @click=\"AddField\">\n    </div>\n         <p>\n \n    </p>\n  \n                    \n                           \n                           \n                           \n                           \n                           \n                            </form>\n                        </div>\n\n\n\n\n\n    </Layout>\n</template>\n"]},"metadata":{},"sourceType":"module"}