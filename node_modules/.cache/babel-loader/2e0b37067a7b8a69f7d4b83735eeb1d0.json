{"ast":null,"code":"import _classCallCheck from \"C:/Projects/success/project_v.1.0.0/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"C:/Projects/success/project_v.1.0.0/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport _defineProperty from \"C:/Projects/success/project_v.1.0.0/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport firebase from 'firebase/compat/app'; // Add the Firebase products that you want to use\n\nimport \"firebase/compat/auth\";\nimport \"firebase/compat/firestore\";\nimport LoginDataService from \"./services/LoginDataService\";\n\nvar FirebaseAuthBackend = /*#__PURE__*/function () {\n  function FirebaseAuthBackend(firebaseConfig) {\n    var _this = this;\n\n    _classCallCheck(this, FirebaseAuthBackend);\n\n    _defineProperty(this, \"registerUser\", function (username, email, password) {\n      return new Promise(function (resolve, reject) {\n        // eslint-disable-next-line no-unused-vars\n        firebase.auth().createUserWithEmailAndPassword(email, password).then(function (res) {\n          var user = firebase.auth().currentUser.updateProfile({\n            displayName: username\n          });\n          resolve(user);\n        }, function (error) {\n          reject(_this._handleError(error));\n        });\n      });\n    });\n\n    _defineProperty(this, \"loginUser\", function (login, password) {\n      console.log(login, password);\n      return new Promise(function (resolve, reject) {\n        var data = {\n          login_user: login,\n          password_user: password\n        };\n        LoginDataService.create(data).then(function (response) {\n          var user = response.data;\n          console.log(user);\n          resolve(user);\n        }).catch(function (e) {\n          reject(_this._handleError(e));\n        });\n      });\n    });\n\n    _defineProperty(this, \"forgetPassword\", function (email) {\n      return new Promise(function (resolve, reject) {\n        firebase.auth().sendPasswordResetEmail(email, {\n          url: window.location.protocol + \"//\" + window.location.host + \"/login\"\n        }).then(function () {\n          resolve(true);\n        }).catch(function (error) {\n          reject(_this._handleError(error));\n        });\n      });\n    });\n\n    _defineProperty(this, \"logout\", function () {\n      return new Promise(function (resolve, reject) {\n        firebase.auth().signOut().then(function () {\n          resolve(true);\n        }).catch(function (error) {\n          reject(_this._handleError(error));\n        });\n      });\n    });\n\n    _defineProperty(this, \"setLoggeedInUser\", function (user) {\n      sessionStorage.setItem(\"authUser\", JSON.stringify(user));\n    });\n\n    _defineProperty(this, \"getAuthenticatedUser\", function () {\n      if (!sessionStorage.getItem('authUser')) return null;\n      return JSON.parse(sessionStorage.getItem('authUser'));\n    });\n\n    if (firebaseConfig) {\n      // Initialize Firebase\n      firebase.initializeApp(firebaseConfig);\n      firebase.auth().onAuthStateChanged(function (user) {\n        if (user) {\n          sessionStorage.setItem(\"authUser\", JSON.stringify(user));\n        } else {\n          sessionStorage.removeItem('authUser');\n        }\n      });\n    }\n  }\n  /**\r\n   * Registers the user with given details\r\n   */\n\n\n  _createClass(FirebaseAuthBackend, [{\n    key: \"_handleError\",\n    value:\n    /**\r\n     * Handle the error\r\n     * @param {*} error \r\n     */\n    function _handleError(error) {\n      var errorMessage = error.message;\n      return errorMessage;\n    }\n  }]);\n\n  return FirebaseAuthBackend;\n}();\n\nvar _fireBaseBackend = null;\n/**\r\n * Initilize the backend\r\n * @param {*} config \r\n */\n\nvar initFirebaseBackend = function initFirebaseBackend(config) {\n  if (!_fireBaseBackend) {\n    _fireBaseBackend = new FirebaseAuthBackend(config);\n  }\n\n  return _fireBaseBackend;\n};\n/**\r\n * Returns the firebase backend\r\n */\n\n\nvar getFirebaseBackend = function getFirebaseBackend() {\n  return _fireBaseBackend;\n};\n\nexport { initFirebaseBackend, getFirebaseBackend };","map":{"version":3,"sources":["C:/Projects/success/project_v.1.0.0/src/authUtils.js"],"names":["firebase","LoginDataService","FirebaseAuthBackend","firebaseConfig","username","email","password","Promise","resolve","reject","auth","createUserWithEmailAndPassword","then","res","user","currentUser","updateProfile","displayName","error","_handleError","login","console","log","data","login_user","password_user","create","response","catch","e","sendPasswordResetEmail","url","window","location","protocol","host","signOut","sessionStorage","setItem","JSON","stringify","getItem","parse","initializeApp","onAuthStateChanged","removeItem","errorMessage","message","_fireBaseBackend","initFirebaseBackend","config","getFirebaseBackend"],"mappings":"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","sourcesContent":["import firebase from 'firebase/compat/app';\r\n// Add the Firebase products that you want to use\r\nimport \"firebase/compat/auth\";\r\nimport \"firebase/compat/firestore\";\r\nimport LoginDataService from \"./services/LoginDataService\";\r\n\r\nclass FirebaseAuthBackend {\r\n    constructor(firebaseConfig) {\r\n        if (firebaseConfig) {\r\n            // Initialize Firebase\r\n            firebase.initializeApp(firebaseConfig);\r\n            firebase.auth().onAuthStateChanged((user) => {\r\n                if (user) {\r\n                    sessionStorage.setItem(\"authUser\", JSON.stringify(user));\r\n                } else {\r\n                    sessionStorage.removeItem('authUser');\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Registers the user with given details\r\n     */\r\n    registerUser = (username, email, password) => {\r\n        return new Promise((resolve, reject) => {\r\n            // eslint-disable-next-line no-unused-vars\r\n            firebase.auth().createUserWithEmailAndPassword(email, password).then((res) => {\r\n                let user = firebase.auth().currentUser.updateProfile({\r\n                    displayName: username\r\n                });\r\n                resolve(user);\r\n            }, (error) => {\r\n                reject(this._handleError(error));\r\n            });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Login user with given details\r\n     */\r\n    loginUser = (login, password) => {\r\n        console.log(login, password)\r\n        return new Promise((resolve, reject) => {\r\n            var data = {\r\n                login_user: login,\r\n                password_user: password,\r\n            };\r\n            LoginDataService.create(data).then(response => {\r\n                    var user = response.data;\r\n                    console.log(user);\r\n                    resolve(user);\r\n                })\r\n                .catch(e => {\r\n                    reject(this._handleError(e));\r\n                });\r\n\r\n        });\r\n    }\r\n\r\n    /**\r\n     * forget Password user with given details\r\n     */\r\n    forgetPassword = (email) => {\r\n        return new Promise((resolve, reject) => {\r\n            firebase.auth().sendPasswordResetEmail(email, { url: window.location.protocol + \"//\" + window.location.host + \"/login\" }).then(() => {\r\n                resolve(true);\r\n            }).catch((error) => {\r\n                reject(this._handleError(error));\r\n            })\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Logout the user\r\n     */\r\n    logout = () => {\r\n        return new Promise((resolve, reject) => {\r\n            firebase.auth().signOut().then(() => {\r\n                resolve(true);\r\n            }).catch((error) => {\r\n                reject(this._handleError(error));\r\n            })\r\n        });\r\n    }\r\n\r\n    setLoggeedInUser = (user) => {\r\n        sessionStorage.setItem(\"authUser\", JSON.stringify(user));\r\n    }\r\n\r\n    /**\r\n     * Returns the authenticated user\r\n     */\r\n    getAuthenticatedUser = () => {\r\n        if (!sessionStorage.getItem('authUser'))\r\n            return null;\r\n        return JSON.parse(sessionStorage.getItem('authUser'));\r\n    }\r\n\r\n    /**\r\n     * Handle the error\r\n     * @param {*} error \r\n     */\r\n    _handleError(error) {\r\n        var errorMessage = error.message;\r\n        return errorMessage;\r\n    }\r\n}\r\n\r\nlet _fireBaseBackend = null;\r\n\r\n/**\r\n * Initilize the backend\r\n * @param {*} config \r\n */\r\nconst initFirebaseBackend = (config) => {\r\n    if (!_fireBaseBackend) {\r\n        _fireBaseBackend = new FirebaseAuthBackend(config);\r\n    }\r\n    return _fireBaseBackend;\r\n}\r\n\r\n/**\r\n * Returns the firebase backend\r\n */\r\nconst getFirebaseBackend = () => {\r\n    return _fireBaseBackend;\r\n}\r\n\r\nexport { initFirebaseBackend, getFirebaseBackend };"]},"metadata":{},"sourceType":"module"}