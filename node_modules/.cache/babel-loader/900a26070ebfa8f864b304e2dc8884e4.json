{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Max/Desktop/project1.0.0-main/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"regenerator-runtime/runtime.js\";\nimport \"core-js/modules/es.symbol.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport \"core-js/modules/es.array.map.js\";\nimport \"core-js/modules/es.array.splice.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.search.js\";\nimport Layout from \"../../layouts/main.vue\";\nimport PageHeader from \"@/components/page-header\";\nimport appConfig from \"../../../app.config\";\nimport Select2 from 'vue3-select2-component';\nimport RolesDataServise from \"/src/services/RolesDataServise\";\nexport default {\n  jsonpage: {\n    title: \"Basic Elements\",\n    meta: [{\n      name: \"description\",\n      content: appConfig.description\n    }]\n  },\n  data: function data() {\n    return {\n      fields: [{\n        first: '',\n        last: ''\n      }],\n      title: \"Изменение польователя\",\n      Role: {\n        id: '',\n        name: ''\n      },\n      PageRequest: {\n        Fields: [{\n          Name: '',\n          Value: '',\n          Operation: '',\n          Order: ''\n        }],\n        PageNumber: 0,\n        PageLenght: 0,\n        TotalRecords: 0,\n        TotalPage: 0\n      },\n      page: 1,\n      perPage: 1000,\n      pages: [],\n      jsonPages: {\n        PageNumber: 0,\n        TotalRecords: 0\n      },\n      jsonFields: [{\n        name: '',\n        value: ''\n      }],\n      search: \"\",\n      list_items: [],\n      selected: [],\n      allSelected: false,\n      Roles: [{\n        id: '',\n        name: ''\n      }]\n    };\n  },\n  components: {\n    Layout: Layout,\n    PageHeader: PageHeader,\n    Select2: Select2\n  },\n  methods: {\n    selectAll: function selectAll() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var selected;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                if (_this.allSelected) {\n                  selected = _this.list_items.map(function (li) {\n                    return li.id;\n                  });\n                  _this.selected = selected;\n                } else {\n                  _this.selected = [];\n                }\n\n              case 1:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    },\n    getRole: function getRole(id) {\n      var _this2 = this;\n\n      RolesDataServise.get(id).then(function (response) {\n        console.log('!!!!!!!!!!!!!!!!');\n        console.log(response.data);\n        console.log('!!!!!!!!!!!!!!!!');\n\n        if (response.status == 200) {\n          _this2.Role = response.data;\n        } else {\n          _this2.$router.push({\n            path: \"/roles\"\n          });\n        }\n      }).catch(function (e) {\n        console.log(e);\n      });\n    },\n    //добавление новой строки\n    AddField: function AddField() {\n      this.submitted = false;\n      this.Permission.push({\n        Permission: {\n          id: 0,\n          path: \"\",\n          method: \"\"\n        }\n      });\n    },\n    //добавление новой строки(конец)\n    //удаление строки\n    RemoveField: function RemoveField(index) {\n      this.items.splice(index, 1);\n    },\n    //удаление строки конец\n    //полцчение списка endpoints\n    setPage: function setPage(numPage) {\n      this.page = numPage;\n      this.getPermissions();\n      console.log(numPage);\n    },\n    getPermissions: function getPermissions() {\n      var _this3 = this;\n\n      this.jsonPages = {\n        pg_number: this.page,\n        pg_length: this.perPage\n      };\n\n      if (this.search != \"\") {\n        this.jsonPages = [{\n          field: \"name\",\n          value: this.search\n        }];\n      } else {\n        this.jsonFields = [];\n      }\n\n      ;\n      RolesDataServise.listPerms(this.jsonPages).then(function (response) {\n        //dispatch('notification/success', 'Получение списка прошло успешно', { root: true });\n        _this3.list_items = response.data.List;\n        console.log(_this3.list_items);\n        _this3.perPage = response.data.pg_length;\n        _this3.page = response.data.pg_number;\n        console.log(response.data.pg_number, response.data.pg_length);\n        var i = 0;\n\n        for (i = 0; i < response.data.total_pg; i++) {\n          _this3.pages[i] = i + 1;\n        }\n      }).catch(function (error) {\n        //dispatch('notification/error', error, { root: true });\n        console.log(error);\n      });\n    },\n    updateUser: function updateUser() {\n      RolesDataServise.updateUser(data);\n    }\n  },\n  mounted: function mounted() {\n    this.getRole(this.$route.params.id);\n    this.getPermissions();\n    this.selectAll;\n  }\n};","map":{"version":3,"mappings":"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","names":["Layout","PageHeader","appConfig","Select2","RolesDataServise","jsonpage","title","meta","name","content","description","data","fields","first","last","Role","id","PageRequest","Fields","Name","Value","Operation","Order","PageNumber","PageLenght","TotalRecords","TotalPage","page","perPage","pages","jsonPages","jsonFields","value","search","list_items","selected","allSelected","Roles","components","methods","selectAll","map","li","getRole","get","then","console","log","response","status","$router","push","path","catch","e","AddField","submitted","Permission","method","RemoveField","index","items","splice","setPage","numPage","getPermissions","pg_number","pg_length","field","listPerms","List","i","total_pg","error","updateUser","mounted","$route","params"],"sourceRoot":"","sources":["C:\\Users\\Max\\Desktop\\project1.0.0-main\\src\\views\\roles\\edit.vue"],"sourcesContent":["<style>\r\n    .select2 {\r\n        width: 200px !important;\r\n    }\r\n    </style>\r\n    <script>\r\n    import Layout from \"../../layouts/main.vue\";\r\n    import PageHeader from \"@/components/page-header\";\r\n    import appConfig from \"../../../app.config\";\r\n    import Select2 from 'vue3-select2-component';\r\n    import RolesDataServise from \"/src/services/RolesDataServise\";\r\n  \r\n    \r\n    export default {\r\n      jsonpage: {\r\n        title: \"Basic Elements\",\r\n        meta: [{ name: \"description\", content: appConfig.description }],\r\n      },\r\n      data() {\r\n        \r\n        return {\r\n          fields: [{ first: '',last: '' }],\r\n          title: \"Изменение польователя\",\r\n\r\n        \r\n            Role:{\r\n              id:'',\r\n              name:''\r\n            },\r\n          \r\n   \r\n        \r\n\r\n        PageRequest: {\r\n                        Fields: [{\r\n                        Name :'',\r\n                        Value:'',\r\n                        Operation:'',\r\n                        Order:'',\r\n                        }],\r\n                        PageNumber:0,\r\n                        PageLenght:0,\r\n                        TotalRecords:0,\r\n                        TotalPage:0,\r\n                    },\r\n                page: 1,\r\n                perPage: 1000,\r\n                pages: [],\r\n                jsonPages: {\r\n                            PageNumber: 0,\r\n                            TotalRecords:0,\r\n                },\r\n                jsonFields: [{\r\n                            name:'',\r\n                            value: ''\r\n                }],\r\n\r\n                search:\"\",\r\n\r\n                list_items:[],\r\n\r\n                selected: [],\r\n\r\n                allSelected: false,\r\n                \r\n                Roles:[{\r\n                    id:'',\r\n                    name:''\r\n\r\n                }]\r\n        }\r\n      },\r\n      components: {\r\n        Layout,\r\n        PageHeader,\r\n        Select2\r\n      },\r\n\r\n\r\n        \r\n        methods: {\r\n            \r\n          \r\n          async selectAll() {\r\n        if (this.allSelected) {\r\n          const selected = this.list_items.map((li) => li.id);\r\n          this.selected = selected;\r\n        } else {\r\n          this.selected = [];\r\n        }\r\n      },\r\n    \r\n    \r\n            getRole(id) {\r\n       \r\n       RolesDataServise.get(id)\r\n        .then(response => {\r\n          console.log('!!!!!!!!!!!!!!!!')\r\n            console.log(response.data)\r\n          console.log('!!!!!!!!!!!!!!!!')\r\n            if (response.status == 200){\r\n              this.Role = response.data;\r\n            }else{\r\n              this.$router.push({path: \"/roles\"});\r\n              \r\n            }\r\n          \r\n        })\r\n        .catch(e => {\r\n          console.log(e);\r\n        });\r\n    },\r\n          //добавление новой строки\r\n           AddField: function () {\r\n    \r\n              this.submitted = false;\r\n     \r\n              \r\n          this.Permission.push({\r\n            Permission:{\r\n                id:0,\r\n                path:\"\",\r\n                method:\"\"\r\n            }\r\n            \r\n            \r\n            });\r\n          \r\n        }, //добавление новой строки(конец)\r\n          \r\n          \r\n                //удаление строки\r\n          RemoveField: function(index){\r\n    \r\n            this.items.splice(index,1);\r\n    \r\n        },//удаление строки конец\r\n          \r\n    \r\n       \r\n\r\n\r\n//полцчение списка endpoints\r\n        setPage(numPage){\r\n         this.page = numPage;\r\n         this.getPermissions();\r\n         console.log(numPage)\r\n        \r\n    },\r\n\r\n    getPermissions() {\r\n       \r\n       this.jsonPages = {\r\n         pg_number:this.page,\r\n         pg_length: this.perPage\r\n     };\r\n\r\n     if (this.search!=\"\"){\r\n      this.jsonPages = [{\r\n         field:\"name\",\r\n         value: this.search\r\n      }];\r\n      }else{\r\n          this.jsonFields = [];\r\n      };\r\n      \r\n      \r\n           \r\n            RolesDataServise.listPerms( this.jsonPages)\r\n            .then(response => {\r\n\r\n                  //dispatch('notification/success', 'Получение списка прошло успешно', { root: true });\r\n                  this.list_items = response.data.List;\r\n\r\n                  console.log(this.list_items)\r\n\r\n                  this.perPage = response.data.pg_length;\r\n\r\n                  this.page = response.data.pg_number;\r\n                  console.log(response.data.pg_number,response.data.pg_length)\r\n                  let i=0;\r\n                  for(i=0; i<response.data.total_pg;i++){\r\n                  this.pages[i]=i+1;}\r\n                  })\r\n                  .catch(error => {\r\n                  //dispatch('notification/error', error, { root: true });\r\n                  console.log(error);\r\n                  });\r\n\r\n\r\n        },\r\n\r\n\r\n                    updateUser(){\r\n\r\n                      RolesDataServise.updateUser(data)\r\n  \r\n\r\n\r\n\r\n\r\n}\r\n    \r\n      },\r\n    \r\n       mounted() {\r\n     \r\n        this.getRole(this.$route.params.id);\r\n        this.getPermissions()\r\n        this.selectAll\r\n      },\r\n        \r\n    };\r\n    </script>\r\n    \r\n    <template>\r\n      <Layout>\r\n        <PageHeader/>\r\n        \r\n          <div class=\"live-preview\">\r\n                               \r\n                            <form class=\"row g-3 needs-validation\" novalidate>\r\n                                    \r\n                                \r\n                                <div class=\"col-md-6 position-relative\">\r\n                                    <label for=\"validationTooltip03\" class=\"form-label\">role</label>\r\n                                    <input type=\"text\" class=\"form-control\" id=\"validationTooltip03\" v-model=\"Role.name\" >                                       \r\n                                </div>\r\n\r\n                               \r\n                                  \r\n    <p>\r\n     \r\n        </p>\r\n  \r\n    \r\n     <div>\r\n    \r\n       <table class=\"table table-primary table-striped align-middle table-nowrap mb-0\">\r\n        <thead>\r\n            <tr>\r\n                  <!-- items -->\r\n                  \r\n                \r\n             \r\n                <th>Endpoint path</th>\r\n                <th>Endpoint method</th>\r\n                <th>all</th>\r\n                <th>\r\n                  <div class=\"form-check\">\r\n                        <input class=\"form-check-input\" type=\"checkbox\" id=\"formCheck2\" v-model=\"allSelected\" @change=\"selectAll\" />                                                            \r\n                        <label class=\"form-check-label\" for=\"formCheck2\"></label>\r\n                  </div>\r\n                </th>\r\n              \r\n                \r\n                \r\n                \r\n            \r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n            <tr v-for=\"(item) in list_items\" :key=\"item.id\">\r\n        \r\n               \r\n                \r\n               \r\n                <td >{{item.path}}</td>\r\n\r\n                <td >{{item.method}}</td>\r\n                \r\n               <td></td>\r\n               \r\n                  <!-- delete Button -->\r\n                <td>\r\n                  <div class=\"form-check\">\r\n                        <input class=\"form-check-input\" type=\"checkbox\" id=\"formCheck2\" unchecked v-model=\"selected\" :value=\"item.id\" number />                                                            \r\n                        <label class=\"form-check-label\" for=\"formCheck2\"></label>\r\n                  </div>\r\n                    \r\n                </td>\r\n            \r\n            </tr>\r\n           \r\n        </tbody>\r\n        <p></p>\r\n        \r\n    </table>\r\n    \r\n     </div>\r\n    \r\n        <p>\r\n     \r\n        </p>\r\n      \r\n        <div class=\"col-12\">\r\n                      <button class=\"btn btn-success\" type=\"button\" @click=\"updateUser\">Update</button>\r\n                     \r\n        </div>\r\n             <p>\r\n     \r\n        </p>\r\n      \r\n                        \r\n                               \r\n                               \r\n                               \r\n                               \r\n                               \r\n                                </form>\r\n                            </div>\r\n    \r\n    \r\n    \r\n    \r\n    \r\n        </Layout>\r\n    </template>\r\n    "]},"metadata":{},"sourceType":"module"}